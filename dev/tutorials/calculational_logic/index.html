<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Rewriting Calculational Logic · Metatheory.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Metatheory.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Metatheory.jl 2.0</a></li><li><a class="tocitem" href="../../rewrite/">Classical Term Rewriting</a></li><li><a class="tocitem" href="../../egraphs/">EGraphs and Equality Saturation</a></li><li><a class="tocitem" href="../../visualizing/">Visualizing E-Graphs</a></li><li><a class="tocitem" href="../../api/">API Documentation</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Rewriting Calculational Logic</a><ul class="internal"><li><a class="tocitem" href="#Theory-of-Calculational-Logic"><span>Theory of Calculational Logic</span></a></li></ul></li><li><a class="tocitem" href="../custom_types/">Interfacing with Metatheory.jl</a></li><li><a class="tocitem" href="../fibonacci/">Benchmarking Fibonacci. E-Graphs memoize computation.</a></li><li><a class="tocitem" href="../mu/">The MU Puzzle</a></li><li><a class="tocitem" href="../propositional_logic/">Rewriting</a></li><li><a class="tocitem" href="../while_interpreter/">Write a very tiny Turing Complete language in Julia.</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Rewriting Calculational Logic</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Rewriting Calculational Logic</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaSymbolics/Metatheory.jl/blob/master/test/tutorials/calculational_logic.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Rewriting-Calculational-Logic"><a class="docs-heading-anchor" href="#Rewriting-Calculational-Logic">Rewriting Calculational Logic</a><a id="Rewriting-Calculational-Logic-1"></a><a class="docs-heading-anchor-permalink" href="#Rewriting-Calculational-Logic" title="Permalink"></a></h1><pre><code class="language-julia">using Metatheory</code></pre><h2 id="Theory-of-Calculational-Logic"><a class="docs-heading-anchor" href="#Theory-of-Calculational-Logic">Theory of Calculational Logic</a><a id="Theory-of-Calculational-Logic-1"></a><a class="docs-heading-anchor-permalink" href="#Theory-of-Calculational-Logic" title="Permalink"></a></h2><p>https://www.cs.cornell.edu/gries/Logic/Axioms.html The axioms of calculational propositional logic C are listed in the order in which they are usually presented and taught. Note that equivalence comes first. Note also that, after the first axiom, we take advantage of associativity of equivalence and write sequences of equivalences without parentheses. We use == for equivalence, | for disjunction, &amp; for conjunction,</p><p>Golden rule: p &amp; q == p == q == p | q</p><p>Implication: p ⟹ q == p | q == q Consequence: p ⟸q == q ⟹ p</p><p>Definition of false: false == !true</p><pre><code class="language-">fold = @theory p q begin
  (p::Bool == q::Bool) =&gt; (p == q)
  (p::Bool || q::Bool) =&gt; (p || q)
  (p::Bool ⟹ q::Bool)  =&gt; ((p || q) == q)
  (p::Bool &amp;&amp; q::Bool) =&gt; (p &amp;&amp; q)
  !(p::Bool)           =&gt; (!p)
end

calc = @theory p q r begin</code></pre><p>Associativity of ==:</p><pre><code class="language-">  ((p == q) == r) == (p == (q == r))</code></pre><p>Symmetry of ==:</p><pre><code class="language-">  (p == q) == (q == p)</code></pre><p>Identity of ==:</p><pre><code class="language-">  (q == q) --&gt; true</code></pre><p>Excluded middle Distributivity of !:</p><pre><code class="language-">  !(p == q) == (!(p) == q)</code></pre><p>Definition of !=:</p><pre><code class="language-">  (p != q) == !(p == q)
  #Associativity of ||:
  ((p || q) || r) == (p || (q || r))</code></pre><p>Symmetry of ||:</p><pre><code class="language-">  (p || q) == (q || p)</code></pre><p>Idempotency of ||:</p><pre><code class="language-">  (p || p) --&gt; p</code></pre><p>Distributivity of ||:</p><pre><code class="language-">  (p || (q == r)) == (p || q == p || r)</code></pre><p>Excluded Middle:</p><pre><code class="language-">  (p || !(p)) --&gt; true</code></pre><p>DeMorgan</p><pre><code class="language-">  !(p || q) == (!p &amp;&amp; !q)
  !(p &amp;&amp; q) == (!p || !q)

  (p &amp;&amp; q) == ((p == q) == p || q)

  (p ⟹ q) == ((p || q) == q)
end

calculational_logic_theory = calc ∪ fold


@testset &quot;Calculational Logic&quot; begin
  g = EGraph(:(((!p == p) == false)))
  saturate!(g, calculational_logic_theory)
  extract!(g, astsize)

  @test @areequal calculational_logic_theory true ((!p == p) == false)
  @test @areequal calculational_logic_theory true ((!p == !p) == true)
  @test @areequal calculational_logic_theory true ((!p || !p) == !p) (!p || p) !(!p &amp;&amp; p)
  @test @areequal calculational_logic_theory true ((p ⟹ (p || p)) == true)
  params = SaturationParams(timeout = 12, eclasslimit = 10000, schedulerparams = (1000, 5))

  @test areequal(calculational_logic_theory, true, :(((p ⟹ (p || p)) == ((!(p) &amp;&amp; q) ⟹ q)) == true); params = params)</code></pre><p>Frege&#39;s theorem</p><pre><code class="language-">  @test areequal(calculational_logic_theory, true, :((p ⟹ (q ⟹ r)) ⟹ ((p ⟹ q) ⟹ (p ⟹ r))); params = params)</code></pre><p>Demorgan&#39;s</p><pre><code class="language-">  @test @areequal calculational_logic_theory true (!(p || q) == (!p &amp;&amp; !q))</code></pre><p>Consensus theorem</p><pre><code class="language-">  areequal(calculational_logic_theory, :((x &amp;&amp; y) || (!x &amp;&amp; z) || (y &amp;&amp; z)), :((x &amp;&amp; y) || (!x &amp;&amp; z)); params = params)
end</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../api/">« API Documentation</a><a class="docs-footer-nextpage" href="../custom_types/">Interfacing with Metatheory.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 14 January 2024 11:33">Sunday 14 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
